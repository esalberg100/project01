<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <!-- My CSS -->
    <link rel="stylesheet" href="style.css">
    <!--link href = "signin.css" rel="stylesheet"-->
    <link href="open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
    <!-- Optional JavaScript -->
    <!-- Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    
    <!-- Firebase App is always required and must be first -->
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js"></script>

    <!-- Add additional services that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-messaging.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-functions.js"></script> 
    <script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCZpWm2TIu-bvj8FhElh0em0S2-fx5Zo64",
    authDomain: "newsocialnetwork-ce19e.firebaseapp.com",
    databaseURL: "https://newsocialnetwork-ce19e.firebaseio.com",
    projectId: "newsocialnetwork-ce19e",
    storageBucket: "newsocialnetwork-ce19e.appspot.com",
    messagingSenderId: "373556241499"
  };
  firebase.initializeApp(config);
</script>
</head>


<body>
    
<script>
    $( document ).ready(function() {
        $( "#nav" ).load( "/nav.html" );
        });
</script>  
<span id="nav"></span>
    

    
<script>
 firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
      var user = firebase.auth().currentUser;
      var name, email, photoUrl, uid, emailVerified;
      name = user.displayName;
      email = user.email;
      emailVerified = user.emailVerified;
      document.getElementById('loggedInAs').innerHTML = name;
      uid = user.uid;
      
      document.getElementById('inputDisplayName').value = name;
      document.getElementById('myEmail').value = email;
      
      var usersRef = db.collection("users");
      var docRef = usersRef.doc(name);
      
      if (!emailVerified) {
          document.getElementById("verifyEmailAlert").style.display = "block";
      }
      
  } else {
    window.location.assign("signin.html");
  }
});
    
</script>


<script src="script.js"></script>
    

<div class="form-group container">
    <div class="input-group">
    <input class="form-control form-control-lg" id="inputDisplayName" maxlength="30" type="text" placeholder="Full Name">
    </div>
    <input class="form-control form-control-lg" style="margin-top: 1em;" readonly type="text" id="myEmail" placeholder="Email">
    <button class="btn btn-outline-primary btn-lg btn-block" style="margin-top: 1em;" id="buttonResendEmail" onclick="sendEmailVerification()">Resend Email Verification</button>
    <small id="buttonResendBlock" style="display:none;" class="form-text text-muted">
    A verification email has been sent
    </small>
    <button class="btn btn-outline-primary btn-lg btn-block" style="margin-top: 1em;" id="buttonResetPassword" onclick="resetPassword()">Change Password</button>
    <small id="passwordHelpBlock" style="display:none;" class="form-text text-muted">
    A password reset email has been sent
    </small>
    <button class="btn btn-primary btn-lg btn-block" style="margin-top: 1em;margin-bottom: 1em;" type="submit" id="buttonUpdateProfile" disabled onclick="updateProfile()">Save Account</button>
    <button type="button" style="color:red;" class="btn btn-block btn-link" data-toggle="modal" data-target="#exampleModal">Delete account</button>
</div>
    

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Delete your account?</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h5>Are you sure you want to permanently delete your account?</h5>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" onclick="deleteUser();">Delete</button>
      </div>
    </div>
  </div>
</div>
    
<div id="verifyEmailAlert" style="display:none;" class="alert alert-warning alert-dismissible fade show" role="alert">
  <strong>Verify your email</strong> Please check your inbox to verify your email address
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>

          
<script type='text/javascript'>
$(function () {
        $('#inputDisplayName').keyup(function () {
            if ($(this).val() == '') {
                $('#buttonUpdateProfile').prop('disabled', true);
            } else {
                $('#buttonUpdateProfile').prop('disabled', false);
            }
        });
    });
</script>

    
</body>

</html>